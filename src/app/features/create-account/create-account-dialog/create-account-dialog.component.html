<h2 mat-dialog-title>Criar conta</h2>
<mat-dialog-content>
    <form [formGroup]="mainFormGroup" id="form" (ngSubmit)="onSubmit()" class="form-container">
        @if (hasAuthFailed$ | async) {
            <app-shared-message-bar class="margin-bottom-small" [showIcon]="true" messageType="error">
                Login ou senha incorretos.
            </app-shared-message-bar>
        }
        <h3 class="mat-title-medium">Dados básicos</h3>
        <div class="fields-group">
            <app-shared-form-field-name     [configuration]="{formGroup: mainFormGroup, name: 'name',       formSubmit$: formSubmit$}"></app-shared-form-field-name>
            <app-shared-form-field-email    [configuration]="{formGroup: mainFormGroup, name: 'email',      formSubmit$: formSubmit$}"></app-shared-form-field-email>
            <app-shared-form-field-password [configuration]="{formGroup: mainFormGroup, name: 'password',   formSubmit$: formSubmit$}"></app-shared-form-field-password>
        </div>
        <h3 class="mat-title-medium margin-top-big">Endereço de cobrança</h3>
        <div class="fields-group" formGroupName="billingAddress">
            <app-shared-form-field-postal-code      [configuration]="{formGroup: billingAddressFormGroup, name: 'postalCode',   formSubmit$: formSubmit$}"></app-shared-form-field-postal-code>
            <app-shared-form-field-street           [configuration]="{formGroup: billingAddressFormGroup, name: 'street',       formSubmit$: formSubmit$}"></app-shared-form-field-street>
            <app-shared-form-field-building-number  [configuration]="{formGroup: billingAddressFormGroup, name: 'number',       formSubmit$: formSubmit$}"></app-shared-form-field-building-number>
            <app-shared-form-field-district         [configuration]="{formGroup: billingAddressFormGroup, name: 'district',     formSubmit$: formSubmit$}"></app-shared-form-field-district>
            <app-shared-form-field-city             [configuration]="{formGroup: billingAddressFormGroup, name: 'city',         formSubmit$: formSubmit$}"></app-shared-form-field-city>
            <app-shared-form-field-state            [configuration]="{formGroup: billingAddressFormGroup, name: 'state',        formSubmit$: formSubmit$}"></app-shared-form-field-state>
        </div>

        <!-- <h3 class="mat-title-medium margin-top-big">Endereço de entrega</h3>
        <div class="fields-group" formGroupName="shippingAddress">
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
                <mat-label>CEP</mat-label>
                <input type="number" (blur)="updatePasswordErrorMessage()" formControlName="postalCode" matInput
                    placeholder="Digite aqui o CEP.">
                <mat-error>{{passwordErrorMessage}}</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
                <mat-label>Estado</mat-label>
                <input type="text" (blur)="updatePasswordErrorMessage()" formControlName="state" matInput
                    placeholder="Digite aqui o estado.">
                <mat-error>{{passwordErrorMessage}}</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
                <mat-label>Cidade</mat-label>
                <input type="text" (blur)="updatePasswordErrorMessage()" formControlName="city" matInput
                    placeholder="Digite aqui a cidade.">
                <mat-error>{{passwordErrorMessage}}</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
                <mat-label>Rua</mat-label>
                <input type="text" (blur)="updatePasswordErrorMessage()" formControlName="street" matInput
                    placeholder="Digite aqui a rua.">
                <mat-error>{{passwordErrorMessage}}</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
                <mat-label>Número</mat-label>
                <input type="text" id="password" (blur)="updatePasswordErrorMessage()" formControlName="number" matInput
                    placeholder="Digite aqui o número.">
                <mat-error>{{passwordErrorMessage}}</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" subscriptSizing="dynamic">
                <mat-label>Bairro</mat-label>
                <input type="text" (blur)="updatePasswordErrorMessage()" formControlName="district" matInput
                    placeholder="Digite aqui o bairro.">
                <mat-error>{{passwordErrorMessage}}</mat-error>
            </mat-form-field>
        </div> -->
    </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancelar</button>
    <button type="submit" form="form" mat-flat-button [disabled]="isAuthenticationLoading$ | async">
        @if (!(isAuthenticationLoading$ | async)) {
        <span>Entrar</span>
        } @else {
        <span><mat-spinner [diameter]="24"></mat-spinner></span>
        }
    </button>
</mat-dialog-actions>
